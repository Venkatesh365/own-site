{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\MY PC\\\\Desktop\\\\REACT APP\\\\myapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Component}from'react';import Loader from'react-loader-spinner';import Cookies from'js-cookie';import ProductCard from'../ProductCard';import ProductsHeader from'../ProductsHeader';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var sortbyOptions=[{optionId:'https://hi--lo.herokuapp.com/products/high-price',displayText:'Price (High-Low)'},{optionId:'https://hi--lo.herokuapp.com/products/low-price',displayText:'Price (Low-High)'}];var AllProductsSection=/*#__PURE__*/function(_Component){_inherits(AllProductsSection,_Component);var _super=_createSuper(AllProductsSection);function AllProductsSection(){var _this;_classCallCheck(this,AllProductsSection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={productsList:[],isLoading:false,activeOptionId:sortbyOptions[0].optionId};_this.getProducts=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var jwtToken,activeOptionId,apiUrl,options,response,fetchedData,fD,updatedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});jwtToken=Cookies.get('jwtToken');activeOptionId=_this.state.activeOptionId;apiUrl=activeOptionId;options={headers:{Authorization:\"Bearer \".concat(jwtToken)},method:'GET'};_context.next=7;return fetch(apiUrl,options);case 7:response=_context.sent;if(!response.ok){_context.next=15;break;}_context.next=11;return response.json();case 11:fetchedData=_context.sent;fD={fetchedData:fetchedData};updatedData=fD.fetchedData.map(function(product){return{title:product.title,brand:product.brand,price:product.price,id:product.id,imageUrl:product.image_url,rating:product.rating};});_this.setState({productsList:updatedData,isLoading:false});case 15:case\"end\":return _context.stop();}}},_callee);}));_this.updateActiveOptionId=function(activeOptionId){_this.setState({activeOptionId:activeOptionId},_this.getProducts);};_this.renderProductsList=function(){var _this$state=_this.state,productsList=_this$state.productsList,activeOptionId=_this$state.activeOptionId;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProductsHeader,{activeOptionId:activeOptionId,sortbyOptions:sortbyOptions,updateActiveOptionId:_this.updateActiveOptionId}),/*#__PURE__*/_jsx(\"ul\",{className:\"products-list\",children:productsList.map(function(product){return/*#__PURE__*/_jsx(ProductCard,{productData:product},product.id);})})]});};_this.renderLoader=function(){return/*#__PURE__*/_jsx(\"div\",{className:\"products-loader-container\",children:/*#__PURE__*/_jsx(Loader,{type:\"ThreeDots\",color:\"#0b69ff\",height:\"50\",width:\"50\"})});};return _this;}_createClass(AllProductsSection,[{key:\"componentDidMount\",value:function componentDidMount(){this.getProducts();}},{key:\"render\",value:function render(){var isLoading=this.state.isLoading;return isLoading?this.renderLoader():this.renderProductsList();}}]);return AllProductsSection;}(Component);export default AllProductsSection;","map":{"version":3,"sources":["C:/Users/MY PC/Desktop/REACT APP/myapp/src/components/AllProductsSection/index.js"],"names":["Component","Loader","Cookies","ProductCard","ProductsHeader","sortbyOptions","optionId","displayText","AllProductsSection","state","productsList","isLoading","activeOptionId","getProducts","setState","jwtToken","get","apiUrl","options","headers","Authorization","method","fetch","response","ok","json","fetchedData","fD","updatedData","map","product","title","brand","price","id","imageUrl","image_url","rating","updateActiveOptionId","renderProductsList","renderLoader"],"mappings":"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","sourcesContent":["import {Component} from 'react'\r\nimport Loader from 'react-loader-spinner'\r\nimport Cookies from 'js-cookie'\r\n\r\nimport ProductCard from '../ProductCard'\r\nimport ProductsHeader from '../ProductsHeader'\r\nimport './index.css'\r\n\r\nconst sortbyOptions = [\r\n  {\r\n    optionId: 'https://hi--lo.herokuapp.com/products/high-price',\r\n    displayText: 'Price (High-Low)',\r\n  },\r\n  {\r\n    optionId: 'https://hi--lo.herokuapp.com/products/low-price',\r\n    displayText: 'Price (Low-High)',\r\n  },\r\n]\r\n\r\nclass AllProductsSection extends Component {\r\n  state = {\r\n    productsList: [],\r\n    isLoading: false,\r\n    activeOptionId: sortbyOptions[0].optionId,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getProducts()\r\n  }\r\n\r\n  getProducts = async () => {\r\n    this.setState({\r\n      isLoading: true,\r\n    })\r\n    const jwtToken = Cookies.get('jwtToken')\r\n    const {activeOptionId} = this.state\r\n    \r\n    const apiUrl = activeOptionId\r\n    const options = {\r\n      headers: {\r\n        Authorization: `Bearer ${jwtToken}`,\r\n      },\r\n      method: 'GET',\r\n    }\r\n    const response = await fetch(apiUrl, options)\r\n    if (response.ok) {\r\n      const fetchedData = await response.json()\r\n      const fD = {fetchedData}\r\n      const updatedData = fD.fetchedData.map(product => ({\r\n        title: product.title,\r\n        brand: product.brand,\r\n        price: product.price,\r\n        id: product.id,\r\n        imageUrl: product.image_url,\r\n        rating: product.rating,\r\n      }))\r\n      this.setState({\r\n        productsList: updatedData,\r\n        isLoading: false,\r\n      })\r\n    }\r\n  }\r\n\r\n  updateActiveOptionId = activeOptionId => {\r\n    this.setState({activeOptionId}, this.getProducts)\r\n  }\r\n\r\n  renderProductsList = () => {\r\n    const {productsList, activeOptionId} = this.state\r\n    return (\r\n      <>\r\n        <ProductsHeader\r\n          activeOptionId={activeOptionId}\r\n          sortbyOptions={sortbyOptions}\r\n          updateActiveOptionId={this.updateActiveOptionId}\r\n        />\r\n        <ul className=\"products-list\">\r\n          {productsList.map(product => (\r\n            <ProductCard productData={product} key={product.id} />\r\n          ))}\r\n        </ul>\r\n      </>\r\n    )\r\n  }\r\n\r\n  renderLoader = () => (\r\n    <div className=\"products-loader-container\">\r\n      <Loader type=\"ThreeDots\" color=\"#0b69ff\" height=\"50\" width=\"50\" />\r\n    </div>\r\n  )\r\n\r\n  render() {\r\n    const {isLoading} = this.state\r\n    return isLoading ? this.renderLoader() : this.renderProductsList()\r\n  }\r\n}\r\n\r\nexport default AllProductsSection"]},"metadata":{},"sourceType":"module"}