{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MY PC\\\\Desktop\\\\REACT APP\\\\myapp\\\\src\\\\components\\\\AllProductsSection\\\\index.js\";\nimport { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport Cookies from 'js-cookie';\nimport FiltersGroup from '../FiltersGroup';\nimport ProductCard from '../ProductCard';\nimport ProductsHeader from '../ProductsHeader';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst categoryOptions = [{\n  name: 'Clothing',\n  categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/clothing'\n}, {\n  name: 'Electronics',\n  categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/electronics'\n}, {\n  name: 'Appliances',\n  categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/appliances'\n}, {\n  name: 'Grocery',\n  categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/grocery'\n}, {\n  name: 'Toys',\n  categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/toys'\n}];\nconst sortbyOptions = [{\n  optionId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/high-price',\n  displayText: 'Price (High-Low)'\n}, {\n  optionId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/low-price',\n  displayText: 'Price (Low-High)'\n}];\nconst ratingsList = [{\n  ratingId: '4',\n  imageUrl: 'https://assets.ccbp.in/frontend/react-js/rating-four-stars-img.png'\n}, {\n  ratingId: '3',\n  imageUrl: 'https://assets.ccbp.in/frontend/react-js/rating-three-stars-img.png'\n}, {\n  ratingId: '2',\n  imageUrl: 'https://assets.ccbp.in/frontend/react-js/rating-two-stars-img.png'\n}, {\n  ratingId: '1',\n  imageUrl: 'https://assets.ccbp.in/frontend/react-js/rating-one-star-img.png'\n}];\nconst apiStatusConstants = {\n  initial: 'INITIAL',\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n  inProgress: 'IN_PROGRESS'\n};\n\nclass AllProductsSection extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      productsList: [],\n      apiStatus: apiStatusConstants.initial,\n      activeOptionId: sortbyOptions[0].optionId,\n      activeCategoryId: '',\n      searchInput: '',\n      activeRatingId: ''\n    };\n\n    this.getProducts = async () => {\n      this.setState({\n        apiStatus: apiStatusConstants.inProgress\n      });\n      const jwtToken = Cookies.get('jwtToken');\n      const {\n        activeOptionId,\n        activeCategoryId,\n        searchInput,\n        activeRatingId\n      } = this.state;\n      const apiUrl = activeOptionId || activeCategoryId;\n      console.log(apiUrl);\n      const options = {\n        headers: {\n          Authorization: `Bearer ${jwtToken}`\n        },\n        method: 'GET'\n      };\n      const response = await fetch(apiUrl, options);\n\n      if (response.ok) {\n        const fetchedData = await response.json();\n        const fD = {\n          fetchedData\n        };\n        const updatedData = fD.fetchedData.map(product => ({\n          title: product.title,\n          brand: product.brand,\n          price: product.price,\n          id: product.id,\n          imageUrl: product.image_url,\n          rating: product.rating\n        }));\n        this.setState({\n          productsList: updatedData,\n          apiStatus: apiStatusConstants.success\n        });\n      } else {\n        this.setState({\n          apiStatus: apiStatusConstants.failure\n        });\n      }\n    };\n\n    this.changeSortby = activeOptionId => {\n      this.setState({\n        activeOptionId\n      }, this.getProducts);\n    };\n\n    this.clearFilters = () => {\n      this.setState({\n        searchInput: '',\n        activeCategoryId: '',\n        activeRatingId: ''\n      }, this.getProducts);\n    };\n\n    this.changeRating = activeRatingId => {\n      this.setState({\n        activeRatingId\n      }, this.getProducts);\n    };\n\n    this.changeCategory = activeCategoryId => {\n      this.setState({\n        activeCategoryId\n      }, this.getProducts);\n    };\n\n    this.enterSearchInput = () => {\n      this.getProducts();\n    };\n\n    this.changeSearchInput = searchInput => {\n      this.setState({\n        searchInput\n      });\n    };\n\n    this.renderFailureView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-error-view-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-products-error-view.png\",\n        alt: \"products failure\",\n        className: \"products-failure-img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"product-failure-heading-text\",\n        children: \"Oops! Something Went Wrong\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"products-failure-description\",\n        children: \"We are having some trouble processing your request. Please try again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this);\n\n    this.renderProductsListView = () => {\n      const {\n        productsList,\n        activeOptionId\n      } = this.state;\n      const shouldShowProductsList = productsList.length > 0;\n      return shouldShowProductsList ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"all-products-container\",\n        children: [/*#__PURE__*/_jsxDEV(ProductsHeader, {\n          activeOptionId: activeOptionId,\n          sortbyOptions: sortbyOptions,\n          changeSortby: this.changeSortby\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"products-list\",\n          children: productsList.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n            productData: product\n          }, product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-products-view\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-no-products-view.png\",\n          className: \"no-products-img\",\n          alt: \"no products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"no-products-heading\",\n          children: \"No Products Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-products-description\",\n          children: \"We could not find any products. Try other filters.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.renderLoadingView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-loader-container\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"ThreeDots\",\n        color: \"#0b69ff\",\n        height: \"50\",\n        width: \"50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 5\n    }, this);\n\n    this.renderAllProducts = () => {\n      const {\n        apiStatus\n      } = this.state;\n\n      switch (apiStatus) {\n        case apiStatusConstants.success:\n          return this.renderProductsListView();\n\n        case apiStatusConstants.failure:\n          return this.renderFailureView();\n\n        case apiStatusConstants.inProgress:\n          return this.renderLoadingView();\n\n        default:\n          return null;\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getProducts();\n  }\n\n  render() {\n    const {\n      activeCategoryId,\n      searchInput,\n      activeRatingId\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"all-products-section\",\n      children: [/*#__PURE__*/_jsxDEV(FiltersGroup, {\n        searchInput: searchInput,\n        categoryOptions: categoryOptions,\n        ratingsList: ratingsList,\n        changeSearchInput: this.changeSearchInput,\n        enterSearchInput: this.enterSearchInput,\n        activeCategoryId: activeCategoryId,\n        activeRatingId: activeRatingId,\n        changeCategory: this.changeCategory,\n        changeRating: this.changeRating,\n        clearFilters: this.clearFilters\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), this.renderAllProducts()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default AllProductsSection;","map":{"version":3,"sources":["C:/Users/MY PC/Desktop/REACT APP/myapp/src/components/AllProductsSection/index.js"],"names":["Component","Loader","Cookies","FiltersGroup","ProductCard","ProductsHeader","categoryOptions","name","categoryId","sortbyOptions","optionId","displayText","ratingsList","ratingId","imageUrl","apiStatusConstants","initial","success","failure","inProgress","AllProductsSection","state","productsList","apiStatus","activeOptionId","activeCategoryId","searchInput","activeRatingId","getProducts","setState","jwtToken","get","apiUrl","console","log","options","headers","Authorization","method","response","fetch","ok","fetchedData","json","fD","updatedData","map","product","title","brand","price","id","image_url","rating","changeSortby","clearFilters","changeRating","changeCategory","enterSearchInput","changeSearchInput","renderFailureView","renderProductsListView","shouldShowProductsList","length","renderLoadingView","renderAllProducts","componentDidMount","render"],"mappings":"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","sourcesContent":["import {Component} from 'react'\r\nimport Loader from 'react-loader-spinner'\r\nimport Cookies from 'js-cookie'\r\nimport FiltersGroup from '../FiltersGroup'\r\nimport ProductCard from '../ProductCard'\r\nimport ProductsHeader from '../ProductsHeader'\r\nimport './index.css'\r\n\r\n\r\nconst categoryOptions = [\r\n  {\r\n    name: 'Clothing',\r\n    categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/clothing',\r\n  },\r\n  {\r\n    name: 'Electronics',\r\n    categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/electronics',\r\n  },\r\n  {\r\n    name: 'Appliances',\r\n    categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/appliances',\r\n  },\r\n  {\r\n    name: 'Grocery',\r\n    categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/grocery',\r\n  },\r\n  {\r\n    name: 'Toys',\r\n    categoryId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/toys',\r\n  },\r\n]\r\n\r\nconst sortbyOptions = [\r\n  {\r\n    optionId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/high-price',\r\n    displayText: 'Price (High-Low)',\r\n  },\r\n  {\r\n    optionId: 'https://e-c-o-m-m-e-r-c-e.herokuapp.com/low-price',\r\n    displayText: 'Price (Low-High)',\r\n  },\r\n]\r\n\r\nconst ratingsList = [\r\n  {\r\n    ratingId: '4',\r\n    imageUrl:\r\n      'https://assets.ccbp.in/frontend/react-js/rating-four-stars-img.png',\r\n  },\r\n  {\r\n    ratingId: '3',\r\n    imageUrl:\r\n      'https://assets.ccbp.in/frontend/react-js/rating-three-stars-img.png',\r\n  },\r\n  {\r\n    ratingId: '2',\r\n    imageUrl:\r\n      'https://assets.ccbp.in/frontend/react-js/rating-two-stars-img.png',\r\n  },\r\n  {\r\n    ratingId: '1',\r\n    imageUrl:\r\n      'https://assets.ccbp.in/frontend/react-js/rating-one-star-img.png',\r\n  },\r\n]\r\n\r\nconst apiStatusConstants = {\r\n  initial: 'INITIAL',\r\n  success: 'SUCCESS',\r\n  failure: 'FAILURE',\r\n  inProgress: 'IN_PROGRESS',\r\n}\r\n\r\nclass AllProductsSection extends Component {\r\n  state = {\r\n    productsList: [],\r\n    apiStatus: apiStatusConstants.initial,\r\n    activeOptionId: sortbyOptions[0].optionId,\r\n    activeCategoryId: '',\r\n    searchInput: '',\r\n    activeRatingId: '',\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getProducts()\r\n  }\r\n\r\n  getProducts = async () => {\r\n    this.setState({\r\n      apiStatus: apiStatusConstants.inProgress,\r\n    })\r\n    const jwtToken = Cookies.get('jwtToken')\r\n    const {\r\n      activeOptionId,\r\n      activeCategoryId,\r\n      searchInput,\r\n      activeRatingId,\r\n    } = this.state\r\n \r\n    const apiUrl =  (activeOptionId||activeCategoryId)\r\n    console.log(apiUrl)\r\n    const options = {\r\n      headers: {\r\n        Authorization: `Bearer ${jwtToken}`,\r\n      },\r\n      method: 'GET',\r\n    }\r\n   \r\n    const response = await fetch(apiUrl, options)\r\n    if (response.ok) {\r\n      const fetchedData = await response.json()\r\n      const fD = {fetchedData}\r\n      const updatedData = fD.fetchedData.map(product => ({\r\n        title: product.title,\r\n        brand: product.brand,\r\n        price: product.price,\r\n        id: product.id,\r\n        imageUrl: product.image_url,\r\n        rating: product.rating,\r\n      }))\r\n    \r\n      this.setState({\r\n        productsList: updatedData,\r\n        apiStatus: apiStatusConstants.success,\r\n      })\r\n    } else {\r\n      this.setState({\r\n        apiStatus: apiStatusConstants.failure,\r\n      })\r\n    }\r\n\r\n    \r\n    \r\n    \r\n  }\r\n\r\n\r\n  changeSortby = activeOptionId => {\r\n    this.setState({activeOptionId}, this.getProducts)\r\n  }\r\n\r\n  clearFilters = () => {\r\n    this.setState(\r\n      {\r\n        searchInput: '',\r\n        activeCategoryId: '',\r\n        activeRatingId: '',\r\n      },\r\n      this.getProducts,\r\n    )\r\n  }\r\n\r\n  changeRating = activeRatingId => {\r\n    this.setState({activeRatingId}, this.getProducts)\r\n  }\r\n\r\n  changeCategory = activeCategoryId => {\r\n    this.setState({activeCategoryId}, this.getProducts)\r\n  }\r\n\r\n  enterSearchInput = () => {\r\n    this.getProducts()\r\n  }\r\n\r\n  changeSearchInput = searchInput => {\r\n    this.setState({searchInput})\r\n  }\r\n\r\n  renderFailureView = () => (\r\n    <div className=\"products-error-view-container\">\r\n      <img\r\n        src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-products-error-view.png\"\r\n        alt=\"products failure\"\r\n        className=\"products-failure-img\"\r\n      />\r\n      <h1 className=\"product-failure-heading-text\">\r\n        Oops! Something Went Wrong\r\n      </h1>\r\n      <p className=\"products-failure-description\">\r\n        We are having some trouble processing your request. Please try again.\r\n      </p>\r\n    </div>\r\n  )\r\n\r\n  renderProductsListView = () => {\r\n    const {productsList, activeOptionId} = this.state\r\n    const shouldShowProductsList = productsList.length > 0\r\n\r\n    return shouldShowProductsList ? (\r\n      <div className=\"all-products-container\">\r\n        <ProductsHeader\r\n          activeOptionId={activeOptionId}\r\n          sortbyOptions={sortbyOptions}\r\n          changeSortby={this.changeSortby}\r\n        />\r\n        <ul className=\"products-list\">\r\n          {productsList.map(product => (\r\n            <ProductCard productData={product} key={product.id} />\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    ) : (\r\n      <div className=\"no-products-view\">\r\n        <img\r\n          src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz/nxt-trendz-no-products-view.png\"\r\n          className=\"no-products-img\"\r\n          alt=\"no products\"\r\n        />\r\n        <h1 className=\"no-products-heading\">No Products Found</h1>\r\n        <p className=\"no-products-description\">\r\n          We could not find any products. Try other filters.\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderLoadingView = () => (\r\n    <div className=\"products-loader-container\">\r\n      <Loader type=\"ThreeDots\" color=\"#0b69ff\" height=\"50\" width=\"50\" />\r\n    </div>\r\n  )\r\n\r\n  renderAllProducts = () => {\r\n    const {apiStatus} = this.state\r\n\r\n    switch (apiStatus) {\r\n      case apiStatusConstants.success:\r\n        return this.renderProductsListView()\r\n      case apiStatusConstants.failure:\r\n        return this.renderFailureView()\r\n      case apiStatusConstants.inProgress:\r\n        return this.renderLoadingView()\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {activeCategoryId, searchInput, activeRatingId} = this.state\r\n\r\n    return (\r\n      <div className=\"all-products-section\">\r\n        <FiltersGroup\r\n          searchInput={searchInput}\r\n          categoryOptions={categoryOptions}\r\n          ratingsList={ratingsList}\r\n          changeSearchInput={this.changeSearchInput}\r\n          enterSearchInput={this.enterSearchInput}\r\n          activeCategoryId={activeCategoryId}\r\n          activeRatingId={activeRatingId}\r\n          changeCategory={this.changeCategory}\r\n          changeRating={this.changeRating}\r\n          clearFilters={this.clearFilters}\r\n        />\r\n        {this.renderAllProducts()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AllProductsSection\r\n"]},"metadata":{},"sourceType":"module"}