{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/MY PC/Desktop/REACT APP/myapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\MY PC\\\\Desktop\\\\REACT APP\\\\myapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Component}from'react';import Cookies from'js-cookie';import ProductCard from'../ProductCard';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var apiStatusConstants={initial:'INITIAL',success:'SUCCESS',failure:'FAILURE',inProgress:'IN_PROGRESS'};var PrimeDealsSection=/*#__PURE__*/function(_Component){_inherits(PrimeDealsSection,_Component);var _super=_createSuper(PrimeDealsSection);function PrimeDealsSection(){var _this;_classCallCheck(this,PrimeDealsSection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={primeDeals:[],apiStatus:apiStatusConstants.initial};_this.getPrimeDeals=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var jwtToken,apiUrl,options,response,fetchedData,fD,updatedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({apiStatus:apiStatusConstants.inProgress});jwtToken=Cookies.get('jwtToken');apiUrl='https://primedeals--and--uploads.herokuapp.com/prime-deals';options={headers:{Authorization:\"Bearer \".concat(jwtToken)},method:'GET'};_context.next=6;return fetch(apiUrl,options);case 6:response=_context.sent;if(!(response.ok===true)){_context.next=16;break;}_context.next=10;return response.json();case 10:fetchedData=_context.sent;fD={fetchedData:fetchedData};console.log(fD);updatedData=fD.fetchedData.map(function(product){return{title:product.title,brand:product.brand,price:product.price,id:product.id,imageUrl:product.image_url,rating:product.rating};});console.log(updatedData);_this.setState({primeDeals:updatedData,apiStatus:apiStatusConstants.success});case 16:if(response.status===401){_this.setState({apiStatus:apiStatusConstants.failure});}case 17:case\"end\":return _context.stop();}}},_callee);}));_this.renderPrimeDealsList=function(){var primeDeals=_this.state.primeDeals;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"primedeals-list-heading\",children:\"Exclusive Prime Deals\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"products-list\",children:primeDeals.map(function(product){return/*#__PURE__*/_jsx(ProductCard,{productData:product},product.id);})})]});};_this.renderPrimeDealsFailureView=function(){return/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.ccbp.in/frontend/react-js/exclusive-deals-banner-img.png\",alt:\"Register Prime\",className:\"register-prime-image\"});};return _this;}_createClass(PrimeDealsSection,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPrimeDeals();}},{key:\"render\",value:function render(){var apiStatus=this.state.apiStatus;switch(apiStatus){case apiStatusConstants.success:return this.renderPrimeDealsList();case apiStatusConstants.failure:return this.renderPrimeDealsFailureView();default:return null;}}}]);return PrimeDealsSection;}(Component);export default PrimeDealsSection;","map":{"version":3,"sources":["C:/Users/MY PC/Desktop/REACT APP/myapp/src/components/PrimeDealsSection/index.js"],"names":["Component","Cookies","ProductCard","apiStatusConstants","initial","success","failure","inProgress","PrimeDealsSection","state","primeDeals","apiStatus","getPrimeDeals","setState","jwtToken","get","apiUrl","options","headers","Authorization","method","fetch","response","ok","json","fetchedData","fD","console","log","updatedData","map","product","title","brand","price","id","imageUrl","image_url","rating","status","renderPrimeDealsList","renderPrimeDealsFailureView"],"mappings":"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","sourcesContent":["import {Component} from 'react'\r\nimport Cookies from 'js-cookie'\r\n\r\nimport ProductCard from '../ProductCard'\r\nimport './index.css'\r\n\r\nconst apiStatusConstants = {\r\n  initial: 'INITIAL',\r\n  success: 'SUCCESS',\r\n  failure: 'FAILURE',\r\n  inProgress: 'IN_PROGRESS',\r\n  \r\n}\r\n\r\nclass PrimeDealsSection extends Component {\r\n  state = {\r\n    primeDeals: [],\r\n    apiStatus: apiStatusConstants.initial,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPrimeDeals()\r\n  }\r\n\r\n  getPrimeDeals = async () => {\r\n    this.setState({\r\n      apiStatus: apiStatusConstants.inProgress,\r\n    })\r\n\r\n    const jwtToken = Cookies.get('jwtToken')\r\n    const apiUrl = 'https://primedeals--and--uploads.herokuapp.com/prime-deals'\r\n    const options = {\r\n      headers: {\r\n        Authorization: `Bearer ${jwtToken}`,\r\n      },\r\n      method: 'GET',\r\n    }\r\n    const response = await fetch(apiUrl, options)\r\n    if (response.ok === true) {\r\n      const fetchedData = await response.json()\r\n      const fD = {fetchedData}\r\n      console.log(fD)\r\n      const updatedData = fD.fetchedData.map(product => ({\r\n        title: product.title,\r\n        brand: product.brand,\r\n        price: product.price,\r\n        id: product.id,\r\n        imageUrl: product.image_url,\r\n        rating: product.rating\r\n      }))\r\n      console.log(updatedData)\r\n      this.setState({\r\n        primeDeals: updatedData,\r\n        apiStatus: apiStatusConstants.success,\r\n      })\r\n    }\r\n    if (response.status === 401) {\r\n      this.setState({\r\n        apiStatus: apiStatusConstants.failure,\r\n      })\r\n    }\r\n  }\r\n\r\n  renderPrimeDealsList = () => {\r\n    const {primeDeals} = this.state\r\n    return (\r\n      <div>\r\n        <h1 className=\"primedeals-list-heading\">Exclusive Prime Deals</h1>\r\n        <ul className=\"products-list\">\r\n          {primeDeals.map(product => (\r\n            <ProductCard productData={product} key={product.id} />\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderPrimeDealsFailureView = () => (\r\n    <img\r\n      src=\"https://assets.ccbp.in/frontend/react-js/exclusive-deals-banner-img.png\"\r\n      alt=\"Register Prime\"\r\n      className=\"register-prime-image\"\r\n    />\r\n  )\r\n\r\n \r\n\r\n  render() {\r\n    const {apiStatus} = this.state\r\n    switch (apiStatus) {\r\n      case apiStatusConstants.success:\r\n        return this.renderPrimeDealsList()\r\n      case apiStatusConstants.failure:\r\n        return this.renderPrimeDealsFailureView()\r\n      \r\n      default:\r\n        return null\r\n    }\r\n  }\r\n}\r\n\r\nexport default PrimeDealsSection\r\n"]},"metadata":{},"sourceType":"module"}